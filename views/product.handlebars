<div class="row ml-5 mt-5">
  <div class="col-2">
    <div class="nav flex-column">
      <a class="navbar-brand mb-5" id="logo" href="/">E-commerce website</a>
      <div class="list-group">
        <a class="list-group-item list-group-item-action" href="/">首頁</a>
      </div>
      {{#each categories}}
      <div class="list-group">
        <a class="list-group-item list-group-item-action" href="/Category/{{this.id}}">{{this.name}}</a>
      </div>
      {{/each}}
    </div>
  </div>

  <div class="index col-3 ml-5 mt-5 mb-5">
    <a class="categoryName" style="text-decoration: none;"
      href="/Category/{{product.Product_category.id}}">{{product.Product_category.name}}
    </a>
    </br />
    <img class="mt-5" src="{{product.image}}" width="300px" height="400px" alt="image">
  </div>

  <div class="col-5 mt-5">
    <div class="card-body mt-5">
      <h3 class="card-title" style="text-align: center;">{{product.name}}</h3>
      <h5 class="mt-5" style="text-align: center;">NT $ {{product.price}}</h5>

      <div class="star ml-5">
        <span class="stars d-flex mt-5 align-items-center ml-5">
          {{#star 2.5}}{{/star}}
        </span>
      </div>

      <div class="cartBtn mt-2" style="text-align: center;">
        <form action="/cart" method="POST">
          <button type="submit" class="btn btn-secondary mt-5"><i class="fas fa-shopping-cart"></i> 加入購物車</button>
        </form>
      </div>
    </div>
  </div>
</div>

<hr class="ml-5 col-10">

<div class="ml-5 mt-5 mb-5">
  <h4>商品描述</h4>
  <br />

  <small>{{product.description}}</small>
</div>

<hr class="ml-5 col-10">

<div class="ml-5 mt-5 mb-5">
  <h4>相關商品</h4>
</div>

<div class="mt-5 ml-5 col-10">
  <div class="row">
    {{#each productsFilter}}
    <div class="col-md-3">
      <div class="card mb-4 shadow-sm">
        {{!-- {{#ifCond this.id ../product.id}}

        {{else}} --}}
        <a href="/product/{{this.id}}">
          <img class="card-img-top" src="{{this.image}}" alt="Card image cap" width="320px" height="180px">
        </a>
        <div class="card-body">
          <h6 class="card-text" style="text-align: center;">
            <a class="productName" style="text-decoration: none;" href="/product/{{this.id}}">
              {{this.name}}
            </a>
          </h6>
          <div class="badgeBox" style="text-align: center;">
            <span class="badge badge-primary">NT $ {{this.price}}</span>
          </div>
          <small class="card-text">{{this.description}}</small>
          <div class="cartBtn mt-2" style="text-align: center;">
            <form action="/cart" method="POST">
              <button type="submit" class="btn btn-success">加入購物車</button>
            </form>
          </div>
        </div>
        {{!-- {{/ifCond}} --}}
      </div>
    </div>
    {{/each}}
  </div>
</div>

<hr class="ml-5 col-10">

<div class="ml-5 mt-5 mb-5">
  <h4>買家評論 ({{product.Comments.length}}則評論)</h4>

  <div class="list-group mt-5 col-11">
    {{#each product.Comments}}
    <div class="list-group-item list-group-item-action">
      <p>{{this.comment}}</p>
      <small>John　－{{moment this.createdAt}}</small>
    </div>
    {{/each}}
  </div>

  <h4 class="mt-5 mb-5">留下您的評論：</h4>

  <form action="/comments" method="POST">
    <div class="form-group col-11">
      <textarea class="form-control" id="comment" name="comment" rows="3"></textarea>
    </div>

    <p class="mb-3 d-flex align-items-center">
      <span class="text-secondary ml-2">
        商品評分：
      </span>
      <span class="stars d-flex align-items-center detail-starts">
        {{#star 2.5}}{{/star}}
      </span>
    </p>


    <input type="hidden" name="productId" value="{{product.id}}" />
    <button type="submit" class="btn btn-primary ml-3 mt-2">送出評論</button>
  </form>
</div>

<br />
<div class="back ml-5">
  <a class="ml-3" href="javascript:history.back()">回上一頁</a>
</div>